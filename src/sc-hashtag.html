<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="../bower_components/neon-animation/neon-animation.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">

<link rel="import" href="../bower_components/sc-style/sc-style.html">
<link rel="import" href="../bower_components/sc-iconset/sc-iconset.html">

<link rel="import" href="sc-hashtagitem.html">


<dom-module id="sc-hashtag">
<link rel="import" href="../bower_components/sc-style/sc-style.css" type="css">

  <!-- Defines the element's style and local DOM -->
  <template>
    <style>
  :host {
    display: block;
    width: 100%;
    min-height: 100%;
  }


  .topbar {
    height: 14%;
    min-height: 82px;
    box-sizing:border-box;
    padding: 30px 30px 20px 50px;
  }


  .paddingsides {
    padding-left: 4vw;
    padding-right: 4vw;
  }


  .hashtagtitle {
/*    max-width: 85%;*/
  }

  .hashtagtitle p {
    font-size: 42px;
    line-height: 42px;
      margin: 0px 0px 2px 0px;

  }
  .symbol p {
    font-size: 38px;
    line-height: 38px;  
      margin: 0px 0px 0px 0px;

  }

  .symbol {
    /*min-width: 40px;*/
    margin-top: 6px;
  }

  .decliner {
/*    margin:0px 0px 0px 6px;*/
  }

  .margright {
    margin:0px 6px 0px 0px;
  }

  .wordbreak {
    word-break: keep-all;
  }

  .backhash {
    margin:0px 0px 3px 8px;    
  }

  sc-hashtagitem {
    margin: 2vh 0px;
  }





  @media all and (min-width: 0) and (max-width: 420px) { 

    .hashtagtotal {
      @apply(--layout-horizontal);
      @apply(--layout-end);
      @apply(--layout-start-justified);
      box-sizing:border-box;
      padding: 5px 15px 0px 15px;
     /* margin:20px 0px 10px 0px;*/
    }

  .hashtagtitle {
      margin: 0px 0px 10px 0px;
  }

  .hashtagtitle p {
    font-size: 20px;
    line-height: 24px;
/*      margin: 0px 0px 2px 0px;*/
      color: var(--sc-grey4);


  }
  .symbol p {
font-size: 19px;
    line-height: 28px;
      margin: 0px 0px 0px 0px;

  }

  .symbol {
    /*min-width: 30px;*/
      margin: 0px 3px 0px 6px;
  }

  .decliner {
    margin:0px 0px 0px 8px;
  }

  .decliner iron-icon {
    width: 32px;
    height: 36px;
  }


  .avatar-box {
    box-sizing:border-box;
    padding: 0px 0px 0px 15px;
/*    background-color: var(--sc-white);*/

  }

  .balance-box {

/*    background-color: rgba(0,0,0,0.025); */
  }

  paper-icon-button.addbtn {
    position: fixed;
    top: 84vh;
    right: 7vw;
/*    margin: 25px 0px 15px 0px; */
    font-size: 25px;
    padding: 5px;
    z-index: 99;
    box-shadow: 0px 1px 5px -1px rgba(0,0,0,0.5);
    -webkit-box-shadow: 0px 1px 5px -1px rgba(0,0,0,0.5);
    -moz-box-shadow: 0px 1px 5px -1px rgba(0,0,0,0.5);
    -o-box-shadow: 0px 1px 5px -1px rgba(0,0,0,0.5);
    width: 65px;
    height: 65px;

  }

  .addspace {
    box-sizing:border-box;
    padding: 18px;
    /*border: 3px dashed rgba(0,0,0,0.075);*/
    border-radius: 5px;
    margin: 20px 0px 20px 0px; 
  }


  .addspace p {
    font-size: 22px;
    margin: 0px 0px 6px 14px;
  }

  }





  </style>
        <paper-icon-button icon="sc-icons:plus" class="left grey1back grey5 shadow medium addbtn" on-tap="tonewItem" noink>+ new offer</paper-icon-button>

    <div class="totalwidth vertic centercenter">
    <div class="topbar">
<!--        <iron-icon on-tap="exit" id="backbtn" icon="sc-icons:arrowleft" class="decliner grey2 big">back</iron-icon> -->
    <div class="flex"></div>
    <div class="balance-box" id="balancebox">
      <ac-balance
        class=""
        refcur="EUR"
        arcbalance="{{arcbalance}}"
        ethbalance="{{ethbalance}}"
        showswt="false"
        viewmode="small">
      </ac-balance>
    </div>

      <div class="avatar-box">
      <ac-avatar
        id="currentavatar"
        identity="{{identity}}"
        pubkey="{{account}}"
        mode="imgonly"
        size="small"
        on-tap="exit">
      </ac-avatar>
    </div>

    </div>

      <div id="hashtagcontent" class="totalwidth paddingsides">
        <!-- <div class="whitespace"></div> -->
        <div id="{{item}}" class="hashtagtotal totalwidth horizont centercenter">

          <div class="hashtagtitle horizont start startjust">
            <div class="symbol">
              <p class="semibold">#</p>
            </div>
            <p class="bold wordbreak">{{currenthasht}}</p>

          <iron-icon on-tap="exit" icon="sc-icons:decline" class="small backhash grey4">back</iron-icon>
          </div>

          <div class="flex"></div>


        </div>



        <template is="dom-repeat" items="{{testitemzzz}}">
          <sc-hashtagitem
            offereravatar="{{item.offereravatar}}"
            offerer="{{item.offerer}}"
            offererrep="{{item.offererrep}}"
            offer="{{item.offer}}"
            offerhashtag="{{item.offerhashtag}}"
            offertime="{{item.offertime}}"
            offeramount="{{item.offeramount}}"
            nrofreplies="{{item.nrofreplies}}"
            on-tap="toItemdetail">
          </sc-hashtagitem>
        </template>


<!--         <div class="totalwidth horizont center startjust">
          <p class="bold hashtagtitle"># {{currenthasht}}</p>
          <iron-icon on-tap="back" icon="sc-icons:decline" class="small">back</iron-icon>
        </div>
 -->

      <!-- <paper-icon-button icon="sc-icons:plus" class="big blueback white addbtn shadow" on-tap="newOffer">new offer</paper-icon-button> -->

      </div>

  </div>

</template>

<script>
  Polymer({
    is: 'sc-hashtag',

    behaviors: [
      Polymer.NeonSharedElementAnimatableBehavior
    ],

    properties: {
   
      sharedElements: {
        type: Object,
        value: function() {
          return {
            'hero': this.$.currentavatar,
            'balance': this.$.balancebox
          }
        }
      },

    
      animationConfig: {
        type: Object,
        value: function() {
          return {
            'entry': [{
              name: 'slide-from-bottom-animation',
              node:this.$.hashtagcontent,
              toPage: this,
              timing: {
                duration: 700
              }
            },{
              name: 'fade-in-animation',
              node:this.$.backbtn,
              fromPage: this,
              timing: {
                duration: 125
              }

            }, {
              name: 'hero-animation',
              id: 'hero',
              toPage: this,
              timing: {
                  duration: 600
              }
            }, {
              name: 'hero-animation',
              id: 'balance',
              toPage: this,
              timing: {
                  duration: 600
              }
            }],

            'exit': [{
              name: 'slide-down-animation',
              node:this.$.hashtagcontent,
              fromPage: this,
              timing: {
                duration: 700
              }

            },{
              name: 'fade-out-animation',
              node:this.$.backbtn,
              fromPage: this,
              timing: {
                duration: 125
              }

            }, {
              name: 'hero-animation',
              id: 'hero',
              fromPage: this,
              timing: {
                  duration: 600
              }
            }, {
              name: 'hero-animation',
              id: 'balance',
              fromPage: this,
              timing: {
                  duration: 600
              }
              }]
            }
          },
        }

      },

    ready: function() {

        this.testitemzzz = [
         {
            offereravatar: 'http://www.american.edu/uploads/profiles/large/chris_palmer_profile_11.jpg',
            offerer: 'Dick Richards',
            offer: 'Need a ride to 5711 meadow crest and picked up at 404 6th street. Jackalope',
            offerhashtag: '#ridesharing',
            offererrep: '6',
            offertime: 'a few minutes ago',
            offeramount: '1233.50',
            nrofreplies: '2'
          },
         {
            offereravatar: 'http://jcket.com/stoneyroads/files/2014/10/600x/Mr-Oizo.jpg',
            offerer: 'Mr Oizo',
            offer: 'Need a ride from 5905 hidden valley trl to 2408 wolf run',
            offerhashtag: '#ridesharing',
            offererrep: '22',
            offertime: 'today at 21:25',
            offeramount: '330.00',
            nrofreplies: '0'
          },
         {
            offereravatar: 'http://vignette3.wikia.nocookie.net/southpark/images/c/c2/Butters_(Facebook).jpg/revision/latest?cb=20101010032409',
            offerer: 'Leopold Butters',
            offer: 'I need a pick up from 2795 pleasant vally',
            offerhashtag: '#ridesharing',
            offererrep: '398',
            offertime: 'yesterday at 19:45',
            offeramount: '330.00',
            nrofreplies: '4'
          },          
         {
            offereravatar: 'http://jcket.com/stoneyroads/files/2014/10/600x/Mr-Oizo.jpg',
            offerer: 'Mr Oizo',
            offer: 'Need a ride pick up at walmart on ben white and dropped off at 5711 meadow crest',
            offerhashtag: '#ridesharing',
            offererrep: '22',
            offertime: '2 days ago',
            offeramount: '330.00',
            nrofreplies: '0'
          },
        ];
    },


    attached: function(){
    
    },

    // back: function(){
    //   this.fire('exit');
    // },

    exit: function(){

      this.sharedElements = {
            'hero': this.$.currentavatar,
            'balance': this.$.balancebox
        };

      this.animationConfig = {
           'entry': [{
              name: 'slide-from-bottom-animation',
              node:this.$.hashtagcontent,
              toPage: this,
              timing: {
                duration: 700
              }
            },{
              name: 'fade-in-animation',
              node:this.$.backbtn,
              fromPage: this,
              timing: {
                duration: 125
              }

            }, {
              name: 'hero-animation',
              id: 'hero',
              toPage: this,
              timing: {
                  duration: 600
              }
            }, {
              name: 'hero-animation',
              id: 'balance',
              toPage: this,
              timing: {
                  duration: 600
              }
            }],

            'exit': [{
              name: 'fade-out-animation',
              node:this.$.hashtagcontent,
              fromPage: this,
              timing: {
                duration: 125
              }

            },{
              name: 'fade-out-animation',
              node:this.$.backbtn,
              fromPage: this,
              timing: {
                duration: 125
              }

            }, {
              name: 'hero-animation',
              id: 'hero',
              fromPage: this,
              timing: {
                  duration: 600
              }
            }, {
              name: 'hero-animation',
              id: 'balance',
              fromPage: this,
              timing: {
                  duration: 600
              }
              }]
        };

      this.fire('exit');
    },

    tonewItem: function(){
      this.fire('to-newitem');
    },

    toItemdetail: function(e){


      this.sharedElements = {
          'hero': this.$.currentavatar,
          'balance': this.$.balancebox
        };

      this.animationConfig = {
            'entry': [{
              name: 'slide-from-left-animation',
              node:this.$.hashtagcontent,
              toPage: this,
              timing: {
                duration: 600
              }
            },{
              name: 'fade-in-animation',
              node:this.$.backbtn,
              fromPage: this,
              timing: {
                duration: 200
              }

            }, {
              name: 'hero-animation',
              id: 'hero',
              toPage: this,
              timing: {
                  duration: 200
              }
            }, {
              name: 'hero-animation',
              id: 'balance',
              toPage: this,
              timing: {
                  duration: 200
              }

            }],

            'exit': [{
              name: 'slide-left-animation',
              node:this.$.hashtagcontent,
              fromPage: this,
              timing: {
                duration: 600
              }

            },{
              name: 'fade-out-animation',
              node:this.$.backbtn,
              fromPage: this,
              timing: {
                duration: 200
              }

            }, {
              name: 'hero-animation',
              id: 'hero',
              fromPage: this,
              timing: {
                  duration: 200
              }

              }, {
                name: 'hero-animation',
                id: 'balance',
                fromPage: this,
                timing: {
                    duration: 200
                }
              }]
        };


      this.fire('to-itemdetail');
    }
  });
</script>

</dom-module>
