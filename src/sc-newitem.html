<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="../bower_components/neon-animation/neon-animation.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-input/paper-textarea.html">

<link rel="import" href="../bower_components/sc-style/sc-style.html">
<link rel="import" href="../bower_components/sc-iconset/sc-iconset.html">

<link rel="import" href="sc-hashtagitem.html">


<dom-module id="sc-newitem">
<link rel="import" href="../bower_components/sc-style/sc-style.css" type="css">

  <!-- Defines the element's style and local DOM -->
  <template>
    <style>
  :host {
    display: block;
    width: 100%;
    min-height: 100%;
/*    background-color: var(--sc-white);
*/  }


  .topbar {
    height: 14%;
    min-height: 82px;
    box-sizing:border-box;
    padding: 40px 50px 0px 50px;
  }


  .paddingsides {
    padding-left: 12vw;
    padding-right: 12vw;
  }

  .detailtotal {
    box-sizing:border-box;
    padding-top: 10px;
  }

  .avatar-box {
    z-index: 2;
    box-sizing:border-box;
    /*padding: 0px 0px 0px 15px;*/
    margin-right: 14px;     
  }

/*  .offereravatar {
    margin-right: 14px;     
  }*/


/*  .offereravatar img {
    width: 100%;
    height: 100%;
  }

  .offer {
    font-size: 20px;
    line-height: 28px;

  }*/



  .rep {
    font-size: 14px;
  }

  .amount {
    font-size: 36px;
  }

  .swt {
    font-size: 18px;
  }




/*  .yourrespond {
    box-sizing:border-box;
    padding-top: 28px;
    padding-bottom: 28px;
    transition: all 1s linear;

  }*/

/*  .yourreplyamount {
    width: 50%;
  }

  .margbottom {
    margin-bottom: 12px;
  }
*/

  paper-input.swtamount {
    --paper-input-container-input: {
      @apply(--montserrat-bold);
      font-size: 24px;
      line-height: 24px;
      color: var(--sc-yellow);
    };
    --paper-input-container-focus-color: var(--sc-yellow);
  }

  .padder {
    box-sizing:border-box;
    padding: 20px;    
  }

  .amountinput {
    width: 100px;
  }

/*  .replyitem {
    box-sizing:border-box;
    padding: 20px 20px 20px 20px;
    margin-top: 10px;
  }
*/

/*  .youravatar {
    margin-right: 10px;
  }*/
/*  .youravatar {
    width: 30px;
    height: 30px;
    min-width: 30px;
    min-height: 30px;  
    border-radius: 50%;
    overflow: hidden;  
  }
  .youravatar img {
    width: 100%;
    height: 100%;
  }*/

  .yourname {
    margin-bottom: 4px;

  }

  .offeramount {
    width: 50%;
/*    max-width: 80%;*/
  }

  .swtwithoffer {
      font-size: 12px;
      line-height: 12px;
/*    margin:0px 0px 12px 4px;*/

  }

  .balance-box {
/*    width: 30px;
    border: 1px solid red;*/
  }
/*  
  .yourtxt {
      font-size: 16px;
      line-height: 22px;
      margin: 15px 0px 15px 0px;
  }*/


/*  .youramount {
      font-size: 22px;
      line-height: 22px;
  }

  .youramountSWT {
      font-size: 11px;
      line-height: 11px;
  }
*/

/*  .greytopborder {
    border-top: 1px solid var(--sc-grey1);
  }

  .notopborder {
    border-top: none;
  }  */



  @media all and (min-width: 0) and (max-width: 420px) { 


/*  .hashtagtitle p {
    font-size: 34px;
    line-height: 34px;
      margin: 0px 0px 2px 0px;

  }
  .symbol p {
    font-size: 32px;
    line-height: 32px;  
      margin: 0px 0px 0px 0px;

  }

  .symbol {
    min-width: 30px;
    margin-top: 3px;
  }

  .decliner {
    margin:0px 0px 0px 8px;
  }

  .decliner iron-icon {
    width: 32px;
    height: 36px;
  }*/


  }





  </style>
    <div class="totalwidth vertic centercenter">
      <div class="topbar whiteback" id="topbar">
        <span class="flex"></span>
            <div class="balance-box" id="balancebox">
              <p class="grey1">?</p>
            </div>
        <iron-icon on-tap="toHashtag" id="backbtn" icon="sc-icons:decline" class="decliner grey2 big">back</iron-icon>

      </div> 


      <div class="totalwidth whiteback" id="detailcontent">
        <div class="totalwidth horizont centercenter paddingsides">
          <div class="avatar-box">
            <ac-avatar
              id="avatarimg"
              identity="{{identity}}"
              pubkey="{{account}}"
              mode="imgonly"
              size="medium"
              on-tap="exit">
            </ac-avatar>
          </div>

          <div class="vertic start startjust flex">
            <ac-avatar
              id="username"
              identity="{{identity}}"
              pubkey="{{account}}"
              mode="txtonly"
              size="medium"
              on-tap="exit">
            </ac-avatar>

            <p class="bold rep blue">{{offererrep}} REP</p>
              <ac-balance               
                refcur="EUR"
                arcbalance="{{arcbalance}}"
                ethbalance="{{ethbalance}}"
                showswt="false"
                viewmode="verysmall">
              </ac-balance>
          </div>  

        </div>

        <div class="totalwidth paddingsides vertic centercenter">
          <div class="totalwidth vertic start centerjust">
            <div class="whitespace"></div>
<!--             <paper-input label="Description" class="totalwidth"autofocus>
              <div suffix class="grey4 reg">#needaride </div>
            </paper-input> -->
            <paper-textarea label="Description" class="totalwidth" autofocus value="{{offermsg}}">
            </paper-textarea>
            <div class="totalwidth horizont center endjust">
              <p class="bold"><span>#</span>{{selectedhashtag}}</p>
            </div>

            <div class="totalwidth horizont end startjust">
              <paper-input class="offeramount swtamount" value="{{replyamount}}">
              <div suffix class="yellow bold swtwithoffer">SWT</div>
              </paper-input>
            </div>
          </div>
        <div class="whitespace"></div>
        <div class="whitespace"></div>
        <paper-button noink class="bigbtn blueback white">post this offer</paper-button>
        <div class="whitespace"></div>
        <div class="whitespace"></div>
        <div class="whitespace"></div>

      </div>

</template>

<script>
  Polymer({
    is: 'sc-newitem',

    behaviors: [
      Polymer.NeonSharedElementAnimatableBehavior
    ],

      observers: [
        '_log(offermsg)'
      ],

    properties: {
   
      sharedElements: {
        type: Object,
        value: function() {
          return {
            'hero': this.$.avatarimg,
            'balance': this.$.balancebox
          }
        }
      },

    
      animationConfig: {
        type: Object,
        value: function() {
          return {
            'entry': [{
              name: 'slide-from-right-animation',
              node:this.$.detailcontent,
              toPage: this,
              timing: {
                duration: 600
              }
            },{
              name: 'slide-from-right-animation',
              node:this.$.topbar,
              fromPage: this,
              timing: {
                duration: 600
              }
            },{
              name: 'fade-in-animation',
              node:this.$.backbtn,
              fromPage: this,
              timing: {
                duration: 200
              }
            },{
              name: 'fade-in-animation',
              node:this.$.username,
              fromPage: this,
              timing: {
                duration: 200
              }
            }, {
              name: 'hero-animation',
              id: 'hero',
              toPage: this,
              timing: {
                  duration: 200
              }
            }, {
              name: 'hero-animation',
              id: 'balance',
              toPage: this,
              timing: {
                  duration: 200
              }
            }],

            'exit': [{
              name: 'fade-out-animation',
              node:this.$.detailcontent,
              fromPage: this,
              timing: {
                duration: 125
              }

            },{
              name: 'fade-out-animation',
              node:this.$.backbtn,
              fromPage: this,
              timing: {
                duration: 125
              }

            },{
              name: 'fade-out-animation',
              node:this.$.topbar,
              fromPage: this,
              timing: {
                duration: 125
              }
            }, {
              name: 'hero-animation',
              id: 'hero',
              fromPage: this,
              timing: {
                  duration: 600
              }

            }, {
              name: 'hero-animation',
              id: 'balance',
              fromPage: this,
              timing: {
                  duration: 600
              }
              }]
            }
          },
        }

      },

    ready: function() {

      // THIS IS ALL DUMMY:
      // this.offereravatar = 'http://www.american.edu/uploads/profiles/large/chris_palmer_profile_11.jpg';
      // this.offerer = 'Dick Richards';
      // this.offererrep = '6'
      // this.offer = 'Need a ride from August van de Wielelei 283, Antwerpen to Kempenlaan 26, Wommelgem';
      // this.timestamp = '20 january at 13:22';
      // this.amount = '1233.50';
      // this.replyamount = '1233.50';

      // this.loadingreply = true;
      this.selectedhashtag = "ridesharing";
      // UNTILL HERE !!


      this.replystate = 'init';
      this.bgcolor = "whiteback";
      this.bordertop = "greytopborder";
    },

    attached: function(){
    },

    // back: function(){
    //   this.fire('exit');
    // },

    exit: function(){

      // this.sharedElements = {
      //     'hero': this.$.avatarimg,
      //   };

      // this.animationConfig = {
      //       'entry': [{
      //         name: 'slide-from-right-animation',
      //         node:this.$.detailcontent,
      //         toPage: this,
      //         timing: {
      //           duration: 600
      //         }
      //       },{
      //         name: 'fade-in-animation',
      //         node:this.$.backbtn,
      //         fromPage: this,
      //         timing: {
      //           duration: 200
      //         }

      //       }, {
      //         name: 'hero-animation',
      //         id: 'hero',
      //         toPage: this,
      //         timing: {
      //             duration: 200
      //         }
      //       }],

      //       'exit': [{
      //         name: 'slide-right-animation',
      //         node:this.$.detailcontent,
      //         fromPage: this,
      //         timing: {
      //           duration: 600
      //         }

      //       },{
      //         name: 'fade-out-animation',
      //         node:this.$.backbtn,
      //         fromPage: this,
      //         timing: {
      //           duration: 200
      //         }

      //       }, {
      //         name: 'hero-animation',
      //         id: 'hero',
      //         fromPage: this,
      //         timing: {
      //             duration: 200
      //         }
      //         }]
      //   };

      this.fire('exit');
    },

    toHashtag: function(){

      // this.sharedElements = {
      //       'hero': this.$.avatarimg,
      //       'balance': this.$.balancebox
      //   };

      // this.animationConfig = {
      //      'entry': [{
      //       //   name: 'slide-from-bottom-animation',
      //       //   node:this.$.hashtagcontent,
      //       //   toPage: this,
      //       //   timing: {
      //       //     duration: 700
      //       //   }
      //       // },{
      //       //   name: 'fade-in-animation',
      //       //   node:this.$.backbtn,
      //       //   fromPage: this,
      //       //   timing: {
      //       //     duration: 125
      //       //   }

      //       // }, {
      //       //   name: 'hero-animation',
      //       //   id: 'hero',
      //       //   toPage: this,
      //       //   timing: {
      //       //       duration: 600
      //       //   }
      //       // }, {
      //       //   name: 'hero-animation',
      //       //   id: 'balance',
      //       //   toPage: this,
      //       //   timing: {
      //       //       duration: 600
      //       //   }
      //       }],

      //       'exit': [{
      //       //   name: 'fade-out-animation',
      //       //   node:this.$.hashtagcontent,
      //       //   fromPage: this,
      //       //   timing: {
      //       //     duration: 125
      //       //   }

      //       // },{
      //       //   name: 'fade-out-animation',
      //       //   node:this.$.backbtn,
      //       //   fromPage: this,
      //       //   timing: {
      //       //     duration: 125
      //       //   }

      //       // }, {
      //         name: 'hero-animation',
      //         id: 'hero',
      //         fromPage: this,
      //         timing: {
      //             duration: 600
      //         }
      //       }, {
      //         name: 'hero-animation',
      //         id: 'balance',
      //         fromPage: this,
      //         timing: {
      //             duration: 600
      //         }
      //         }]
      //   };


      this.fire('to-hashtag');
    },

    replystateChanger: function(){
        switch (this.replystate) {
          case 'init':
            this.replystate = 'replying'
            this.bgcolor = "whiteback";
            this.bordertop = "greytopborder";

            setTimeout(function(){ 
            var coll = document.getElementById('replycoll');
            coll.toggle();
             }, 50);
            break;
          case 'replying':
            this.replystate = 'replygivven'
            this.bgcolor = "basestructure";
            this.bordertop = "notopborder";

            setTimeout(function(){ 
            // var coll = document.getElementById('replycoll');
            // coll.toggle();
            this.replystate = 'replygivven'
             }, 50);
            break;
          case 'replygivven':
            this.replystate = 'deletereply'
            this.bordertop = "notopborder";

            break;
          default:
            console.log("!!! ** Niks");
        }
    },

    backtoInit: function(){
        this.replystate = 'init'
    },

    replyLoaded: function(){
            this.loadingreply = false;
            console.log("Yeah::::",this.loadingreply);
    },

    _is: function(a, b) {
      if (b === undefined){
        b = true;
      }
      return a === b;
    },

    _log: function(){
      console.log("This is the logmsg::::::::", this.offermsg);
    }


    // toHome: function(){
    //   this.fire('to-home');
    // }
  });
</script>

</dom-module>
